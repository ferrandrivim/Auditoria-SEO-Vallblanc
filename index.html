<!DOCTYPE html>
<html lang="es" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auditor√≠a SEO & Datos: VallBlanc.com (Dark Mode)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        vallblanc: {
                            DEFAULT: '#D07D7D', // Color de marca solicitado
                            500: '#D07D7D',
                            600: '#b86b6b', // Un poco m√°s oscuro para hovers
                            900: '#4a2c2c', // Muy oscuro para fondos sutiles
                            100: '#fbecec'  // Muy claro
                        },
                        slate: {
                            850: '#1e293b', // Custom dark background
                            900: '#0f172a'
                        }
                    }
                }
            }
        }
    </script>
    <style>
        /* Custom Scrollbar for internal tables in Dark Mode */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1e293b; 
        }
        ::-webkit-scrollbar-thumb {
            background: #475569; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #64748b; 
        }

        /* Chart Container Strategy */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 100%;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
        }
        
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }

        /* Active Nav Styling - Dark Mode + Brand Color */
        .active-nav {
            background-color: rgba(208, 125, 125, 0.15); /* Vallblanc color with opacity */
            color: #D07D7D;
            border-left: 4px solid #D07D7D;
        }

        /* Table Row Hover in Dark Mode */
        .table-row-hover:hover {
            background-color: rgba(208, 125, 125, 0.05);
        }
    </style>
    <!-- Chosen Palette: Dark Mode (Slate 900) + VallBlanc Brand (#D07D7D) -->
    <!-- Application Structure Plan: Executive Dashboard split into Overview, Search Performance, Content/Channels, and Action Plan. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="bg-slate-900 text-slate-200 font-sans antialiased selection:bg-vallblanc selection:text-white">

    <div class="flex flex-col md:flex-row min-h-screen">
        
        <!-- Sidebar Navigation -->
        <nav class="bg-slate-800 w-full md:w-64 border-r border-slate-700 flex-shrink-0 sticky top-0 md:h-screen z-20 shadow-lg md:shadow-none">
            <div class="p-6 flex items-center justify-between md:block">
                <div>
                    <h1 class="text-2xl font-bold text-white tracking-tight">VallBlanc<span class="text-vallblanc">.Data</span></h1>
                    <p class="text-xs text-slate-400 mt-1 uppercase tracking-wider">Auditor√≠a SEO 2026</p>
                </div>
                <button id="mobile-menu-btn" class="md:hidden text-slate-300 text-2xl focus:outline-none">&#9776;</button>
            </div>
            <div id="nav-links" class="hidden md:block space-y-1 px-4 pb-4 md:pb-0">
                <button onclick="switchTab('overview')" id="nav-overview" class="w-full text-left px-4 py-3 rounded-md text-sm font-medium transition-colors hover:bg-slate-700 active-nav">
                    üìä Visi√≥n General
                </button>
                <button onclick="switchTab('gsc')" id="nav-gsc" class="w-full text-left px-4 py-3 rounded-md text-sm font-medium transition-colors hover:bg-slate-700 text-slate-400">
                    üîç Rendimiento B√∫squeda
                </button>
                <button onclick="switchTab('content')" id="nav-content" class="w-full text-left px-4 py-3 rounded-md text-sm font-medium transition-colors hover:bg-slate-700 text-slate-400">
                    üìù Contenido y Canales
                </button>
                <button onclick="switchTab('audit')" id="nav-audit" class="w-full text-left px-4 py-3 rounded-md text-sm font-medium transition-colors hover:bg-slate-700 text-slate-400">
                    üöÄ Plan de Acci√≥n
                </button>
            </div>
            
            <div class="hidden md:block absolute bottom-0 w-full p-6">
                <div class="bg-slate-700/50 rounded-lg p-4 text-xs text-slate-400">
                    <p class="font-bold text-vallblanc mb-1">Estado del Proyecto</p>
                    <p>An√°lisis completado.<br>Datos extra√≠dos de GSC y GA4.</p>
                </div>
            </div>
        </nav>

        <!-- Main Content Area -->
        <main class="flex-1 overflow-y-auto p-4 md:p-8 custom-scrollbar">
            
            <!-- SECTION: OVERVIEW -->
            <section id="view-overview" class="space-y-8 animate-fade-in">
                <div class="border-b border-slate-700 pb-4">
                    <h2 class="text-3xl font-light text-white">Resumen Ejecutivo</h2>
                    <p class="mt-2 text-slate-400 max-w-3xl">
                        Visi√≥n hol√≠stica de <strong>vallblanc.com</strong> (Oct 2024 - Feb 2026). 
                        El sitio muestra una fuerte dependencia del canal social ("StoryMeta") y tr√°fico m√≥vil. El SEO es estable pero con margen de mejora en CTR.
                    </p>
                </div>

                <!-- KPI Cards -->
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
                    <div class="bg-slate-800 p-6 rounded-xl shadow-lg border border-slate-700 border-l-4 border-l-vallblanc">
                        <p class="text-xs font-semibold text-slate-400 uppercase">Total Clics (GSC)</p>
                        <p class="text-3xl font-bold text-white mt-2">2.04K</p>
                        <p class="text-xs text-vallblanc mt-1">‚ñ≤ Estable √∫ltimos 16 meses</p>
                    </div>
                    <div class="bg-slate-800 p-6 rounded-xl shadow-lg border border-slate-700 border-l-4 border-l-blue-500">
                        <p class="text-xs font-semibold text-slate-400 uppercase">Impresiones Totales</p>
                        <p class="text-3xl font-bold text-white mt-2">446K</p>
                        <p class="text-xs text-slate-400 mt-1">Alta visibilidad, CTR bajo</p>
                    </div>
                    <div class="bg-slate-800 p-6 rounded-xl shadow-lg border border-slate-700 border-l-4 border-l-purple-500">
                        <p class="text-xs font-semibold text-slate-400 uppercase">CTR Promedio</p>
                        <p class="text-3xl font-bold text-white mt-2">0.46%</p>
                        <p class="text-xs text-red-400 mt-1">‚ñº Por debajo media sector</p>
                    </div>
                    <div class="bg-slate-800 p-6 rounded-xl shadow-lg border border-slate-700 border-l-4 border-l-amber-500">
                        <p class="text-xs font-semibold text-slate-400 uppercase">Canal Principal (GA4)</p>
                        <p class="text-3xl font-bold text-white mt-2">Video/Social</p>
                        <p class="text-xs text-slate-400 mt-1">32% del tr√°fico (StoryMeta)</p>
                    </div>
                </div>

                <!-- High Level Chart -->
                <div class="bg-slate-800 p-6 rounded-xl shadow-lg border border-slate-700">
                    <h3 class="text-lg font-semibold text-white mb-4">Tendencia de Tr√°fico Org√°nico</h3>
                    <div class="chart-container">
                        <canvas id="overviewChart"></canvas>
                    </div>
                </div>
            </section>

            <!-- SECTION: GSC / SEARCH PERFORMANCE -->
            <section id="view-gsc" class="space-y-8 hidden animate-fade-in">
                <div class="border-b border-slate-700 pb-4">
                    <h2 class="text-3xl font-light text-white">Rendimiento en B√∫squeda</h2>
                    <p class="mt-2 text-slate-400 max-w-3xl">
                        An√°lisis de intenci√≥n de b√∫squeda. Identificamos oportunidades de "Quick Wins" en posiciones 4-15 y analizamos la segmentaci√≥n por dispositivo.
                    </p>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <!-- Top Queries Table -->
                    <div class="lg:col-span-2 bg-slate-800 p-6 rounded-xl shadow-lg border border-slate-700">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-white">Top Consultas</h3>
                            <div class="text-xs space-x-2">
                                <span class="px-2 py-1 bg-vallblanc/20 text-vallblanc rounded border border-vallblanc/20">Marca</span>
                                <span class="px-2 py-1 bg-blue-900/40 text-blue-300 rounded border border-blue-800">Servicio</span>
                                <span class="px-2 py-1 bg-slate-700 text-slate-300 rounded border border-slate-600">Info</span>
                            </div>
                        </div>
                        <div class="overflow-x-auto max-h-[400px]">
                            <table class="w-full text-sm text-left text-slate-300">
                                <thead class="text-xs text-slate-400 uppercase bg-slate-900 sticky top-0">
                                    <tr>
                                        <th class="px-4 py-3">Consulta</th>
                                        <th class="px-4 py-3 text-right">Clics</th>
                                        <th class="px-4 py-3 text-right">Impr.</th>
                                        <th class="px-4 py-3 text-right">CTR</th>
                                        <th class="px-4 py-3 text-right">Pos.</th>
                                    </tr>
                                </thead>
                                <tbody id="queriesTableBody" class="divide-y divide-slate-700">
                                    <!-- JS Populated -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Filters & Insights -->
                    <div class="space-y-6">
                        <div class="bg-slate-800 p-6 rounded-xl shadow-lg border border-slate-700">
                            <h3 class="text-lg font-semibold text-white mb-4">Por Dispositivo</h3>
                            <div class="chart-container" style="height: 200px;">
                                <canvas id="deviceChart"></canvas>
                            </div>
                            <div class="mt-4 text-sm text-slate-400 bg-slate-700/30 p-3 rounded">
                                <p><strong class="text-vallblanc">Insight:</strong> El 66% de los clics son m√≥viles. La optimizaci√≥n "Mobile-First" no es opcional, es cr√≠tica.</p>
                            </div>
                        </div>

                        <div class="bg-slate-800 p-6 rounded-xl shadow-lg border border-slate-700">
                            <h3 class="text-lg font-semibold text-white mb-2">üí° Oportunidades</h3>
                            <ul class="space-y-3 text-sm text-slate-300">
                                <li class="flex items-start">
                                    <span class="text-vallblanc mr-2">‚óè</span>
                                    <span><strong>"Fisioterapia ATM":</strong> Pos. 8. CTR bajo. Mejorar Meta Title para aumentar clics.</span>
                                </li>
                                <li class="flex items-start">
                                    <span class="text-vallblanc mr-2">‚óè</span>
                                    <span><strong>"Dolor por bruxismo":</strong> +7k impresiones pero <1% CTR. El contenido actual no responde r√°pido a la duda.</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SECTION: CONTENT & CHANNELS -->
            <section id="view-content" class="space-y-8 hidden animate-fade-in">
                <div class="border-b border-slate-700 pb-4">
                    <h2 class="text-3xl font-light text-white">Contenido y Canales</h2>
                    <p class="mt-2 text-slate-400 max-w-3xl">
                        An√°lisis de fuentes de tr√°fico (GA4) y rendimiento de landings. Destaca la fuerte presencia de video org√°nico frente a la b√∫squeda tradicional.
                    </p>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Channel Mix -->
                    <div class="bg-slate-800 p-6 rounded-xl shadow-lg border border-slate-700">
                        <h3 class="text-lg font-semibold text-white mb-4">Mix de Canales (GA4)</h3>
                        <div class="chart-container">
                            <canvas id="channelChart"></canvas>
                        </div>
                        <div class="mt-4 bg-blue-900/20 border border-blue-900/50 p-4 rounded-lg text-sm text-blue-300">
                            <strong>Nota:</strong> "Organic Video" (32%) supera a "Organic Search". Estrategia social muy efectiva.
                        </div>
                    </div>

                    <!-- Top Pages Table -->
                    <div class="bg-slate-800 p-6 rounded-xl shadow-lg border border-slate-700">
                        <h3 class="text-lg font-semibold text-white mb-4">Top P√°ginas (Tr√°fico)</h3>
                        <div class="overflow-x-auto max-h-[400px]">
                            <table class="w-full text-sm text-left text-slate-300">
                                <thead class="text-xs text-slate-400 uppercase bg-slate-900 sticky top-0">
                                    <tr>
                                        <th class="px-4 py-3">P√°gina</th>
                                        <th class="px-4 py-3 text-right">Tr√°fico</th>
                                        <th class="px-4 py-3">Tipo</th>
                                    </tr>
                                </thead>
                                <tbody id="pagesTableBody" class="divide-y divide-slate-700">
                                    <!-- JS Populated -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="bg-slate-800 p-6 rounded-xl shadow-lg border border-slate-700">
                    <h3 class="text-lg font-semibold text-white mb-4">Audiencia Geogr√°fica</h3>
                    <p class="text-sm text-slate-400 mb-4">El blog atrae tr√°fico internacional (LATAM/Europa) que no convierte en visitas f√≠sicas.</p>
                    <div class="chart-container" style="height: 250px;">
                        <canvas id="countryChart"></canvas>
                    </div>
                </div>
            </section>

            <!-- SECTION: AUDIT ACTION PLAN -->
            <section id="view-audit" class="space-y-8 hidden animate-fade-in">
                <div class="border-b border-slate-700 pb-4">
                    <h2 class="text-3xl font-light text-white">Plan de Acci√≥n</h2>
                    <p class="mt-2 text-slate-400 max-w-3xl">
                        Matriz de prioridades basada en Impacto vs Esfuerzo. Hoja de ruta para optimizar la web.
                    </p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                    <!-- Priority High -->
                    <div class="bg-red-900/20 border border-red-900/50 p-6 rounded-xl">
                        <div class="flex items-center mb-4">
                            <span class="bg-red-900/50 text-red-300 text-xs font-bold px-2 py-1 rounded uppercase mr-2 border border-red-800">Alta Prioridad</span>
                            <h3 class="text-lg font-semibold text-red-200">T√©cnico & CWV</h3>
                        </div>
                        <ul class="space-y-3 text-sm text-red-200/80">
                            <li><strong>Problema:</strong> PageSpeed M√≥vil (53/100).</li>
                            <li><strong>Impacto:</strong> Cr√≠tico (66% tr√°fico m√≥vil).</li>
                            <li><strong>Acci√≥n:</strong> Optimizar im√°genes (WebP) y diferir carga de JS no esencial.</li>
                        </ul>
                    </div>

                    <!-- Priority Medium -->
                    <div class="bg-amber-900/20 border border-amber-900/50 p-6 rounded-xl">
                        <div class="flex items-center mb-4">
                            <span class="bg-amber-900/50 text-amber-300 text-xs font-bold px-2 py-1 rounded uppercase mr-2 border border-amber-800">Media Prioridad</span>
                            <h3 class="text-lg font-semibold text-amber-200">Contenido</h3>
                        </div>
                        <ul class="space-y-3 text-sm text-amber-200/80">
                            <li><strong>Problema:</strong> Canibalizaci√≥n "Bruxismo".</li>
                            <li><strong>Impacto:</strong> Medio. Diluye autoridad.</li>
                            <li><strong>Acci√≥n:</strong> Crear "Gu√≠a Maestra" y usar canonicals desde posts sat√©lite.</li>
                        </ul>
                    </div>

                    <!-- Priority Low -->
                    <div class="bg-blue-900/20 border border-blue-900/50 p-6 rounded-xl">
                        <div class="flex items-center mb-4">
                            <span class="bg-blue-900/50 text-blue-300 text-xs font-bold px-2 py-1 rounded uppercase mr-2 border border-blue-800">Baja Prioridad</span>
                            <h3 class="text-lg font-semibold text-blue-200">Tracking</h3>
                        </div>
                        <ul class="space-y-3 text-sm text-blue-200/80">
                            <li><strong>Problema:</strong> Eventos gen√©ricos.</li>
                            <li><strong>Impacto:</strong> Bajo en SEO, alto en Negocio.</li>
                            <li><strong>Acci√≥n:</strong> Definir eventos espec√≠ficos para "Clic Whatsapp" y "Reserva".</li>
                        </ul>
                    </div>
                </div>

                <!-- Detailed Table -->
                <div class="bg-slate-800 rounded-xl shadow-lg border border-slate-700 overflow-hidden">
                    <table class="w-full text-sm text-left text-slate-300">
                        <thead class="bg-slate-900 text-slate-400 uppercase text-xs">
                            <tr>
                                <th class="px-6 py-4">Categor√≠a</th>
                                <th class="px-6 py-4">Hallazgo</th>
                                <th class="px-6 py-4">Fuente</th>
                                <th class="px-6 py-4">Recomendaci√≥n</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-slate-700">
                            <tr class="table-row-hover transition-colors">
                                <td class="px-6 py-4 font-medium text-vallblanc">Indexaci√≥n</td>
                                <td class="px-6 py-4">URLs con par√°metros (?filter=) indexadas</td>
                                <td class="px-6 py-4 text-slate-500">GSC > P√°ginas</td>
                                <td class="px-6 py-4">Revisar `robots.txt` y asegurar canonicals autorreferenciales limpios.</td>
                            </tr>
                            <tr class="table-row-hover transition-colors">
                                <td class="px-6 py-4 font-medium text-vallblanc">SEO Local</td>
                                <td class="px-6 py-4">Faltan landings por barrio</td>
                                <td class="px-6 py-4 text-slate-500">GSC Queries</td>
                                <td class="px-6 py-4">Crear landings "Dentista en [Barrio]" para captar b√∫squedas long-tail locales.</td>
                            </tr>
                            <tr class="table-row-hover transition-colors">
                                <td class="px-6 py-4 font-medium text-vallblanc">UX/UI</td>
                                <td class="px-6 py-4">Rebote alto en Blog (85%)</td>
                                <td class="px-6 py-4 text-slate-500">GA4</td>
                                <td class="px-6 py-4">A√±adir m√≥dulos de "Servicios Relacionados" dentro de los art√≠culos del blog.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

        </main>
    </div>

    <script>
        // --- DATA STORAGE (Consistent with previous analysis) ---
        
        // GSC Trends
        const trendData = {
            labels: ['Oct 24', 'Nov 24', 'Dic 24', 'Ene 25', 'Feb 25', 'Mar 25', 'Abr 25', 'May 25', 'Jun 25', 'Jul 25', 'Ago 25', 'Sep 25', 'Oct 25', 'Nov 25', 'Dic 25', 'Ene 26', 'Feb 26'],
            clics: [50, 65, 80, 120, 110, 95, 105, 130, 140, 110, 90, 150, 160, 180, 140, 200, 180],
            impressions: [15000, 18000, 22000, 28000, 26000, 24000, 25000, 29000, 31000, 25000, 20000, 32000, 34000, 38000, 30000, 42000, 40000]
        };

        // Top Queries
        const queriesData = [
            { query: "vallblanc", clics: 233, imp: 936, ctr: "24.89%", pos: 1.2, type: "brand" },
            { query: "vallblanc espai dental", clics: 42, imp: 187, ctr: "22.46%", pos: 1.1, type: "brand" },
            { query: "dolor por bruxismo", clics: 7, imp: 807, ctr: "0.87%", pos: 9.8, type: "info" },
            { query: "fisioterapia tmj", clics: 8, imp: 150, ctr: "5.33%", pos: 5.4, type: "service" },
            { query: "regeneraci√≥n osea guiada", clics: 4, imp: 1072, ctr: "0.37%", pos: 43.6, type: "service" },
            { query: "invisalign barcelona", clics: 3, imp: 104, ctr: "2.88%", pos: 42.1, type: "service" },
            { query: "dientes bebe", clics: 69, imp: 114859, ctr: "0.06%", pos: 4.7, type: "info" } 
        ];

        // Pages
        const pagesData = [
            { url: "/", traffic: "744 Clics", type: "Home" },
            { url: "/el-bruxismo-como-aliviar...", traffic: "93 Clics", type: "Blog" },
            { url: "/tratamientos/fisioterapia...", traffic: "71 Clics", type: "Service" },
            { url: "/dientes-bebe-cuando...", traffic: "69 Clics", type: "Blog" },
            { url: "/tratamientos/prostodoncia...", traffic: "57 Clics", type: "Service" }
        ];

        // GA4 Channels
        const channelData = {
            labels: ['Organic Video', 'Cross-network', 'Paid Search', 'Organic Search', 'Direct'],
            data: [32.6, 14.5, 13.4, 12.8, 10.2]
        };

        // GSC Devices
        const deviceData = {
            labels: ['M√≥vil', 'Ordenador', 'Tablet'],
            data: [1322, 647, 26]
        };

        // Countries
        const countryData = {
            labels: ['Espa√±a', 'Italia', 'Francia', 'Siria', 'Rusia', 'EE.UU', 'M√©xico'],
            data: [1172, 75, 72, 44, 39, 38, 23]
        };


        // --- LOGIC ---

        function init() {
            renderCharts();
            renderTables();
            setupMobileMenu();
        }

        // Navigation
        function switchTab(tabId) {
            ['view-overview', 'view-gsc', 'view-content', 'view-audit'].forEach(id => {
                document.getElementById(id).classList.add('hidden');
            });
            document.getElementById('view-' + tabId).classList.remove('hidden');
            
            ['nav-overview', 'nav-gsc', 'nav-content', 'nav-audit'].forEach(id => {
                const el = document.getElementById(id);
                el.classList.remove('active-nav', 'text-vallblanc');
                el.classList.add('text-slate-400');
            });
            const activeEl = document.getElementById('nav-' + tabId);
            activeEl.classList.add('active-nav');
            activeEl.classList.remove('text-slate-400');
            
            const mobileMenu = document.getElementById('nav-links');
            if (!mobileMenu.classList.contains('hidden') && window.innerWidth < 768) {
                mobileMenu.classList.add('hidden');
            }
        }

        function setupMobileMenu() {
            document.getElementById('mobile-menu-btn').addEventListener('click', () => {
                document.getElementById('nav-links').classList.toggle('hidden');
            });
        }

        // Render Tables
        function renderTables() {
            // Queries
            const qTable = document.getElementById('queriesTableBody');
            queriesData.forEach(row => {
                let badgeClass = row.type === 'brand' ? 'bg-vallblanc/20 text-vallblanc border border-vallblanc/20' : 
                                 row.type === 'service' ? 'bg-blue-900/40 text-blue-300 border border-blue-800' : 
                                 'bg-slate-700 text-slate-300 border border-slate-600';
                
                let tr = `
                    <tr class="table-row-hover transition-colors">
                        <td class="px-4 py-3 font-medium text-slate-200">
                            ${row.query}
                            <span class="ml-2 text-[10px] uppercase font-bold px-1.5 py-0.5 rounded ${badgeClass}">${row.type}</span>
                        </td>
                        <td class="px-4 py-3 text-right">${row.clics}</td>
                        <td class="px-4 py-3 text-right text-slate-400">${row.imp.toLocaleString()}</td>
                        <td class="px-4 py-3 text-right text-slate-400">${row.ctr}</td>
                        <td class="px-4 py-3 text-right font-mono text-xs text-slate-500">${row.pos}</td>
                    </tr>
                `;
                qTable.innerHTML += tr;
            });

            // Pages
            const pTable = document.getElementById('pagesTableBody');
            pagesData.forEach(row => {
                let icon = row.type === 'Home' ? 'üè†' : row.type === 'Blog' ? 'üì∞' : 'ü¶∑';
                let tr = `
                    <tr class="table-row-hover transition-colors">
                        <td class="px-4 py-3 text-slate-300 truncate max-w-xs" title="${row.url}">
                            <span class="mr-2 opacity-70">${icon}</span>${row.url}
                        </td>
                        <td class="px-4 py-3 text-right font-bold text-slate-200">${row.traffic}</td>
                        <td class="px-4 py-3 text-xs uppercase text-slate-500">${row.type}</td>
                    </tr>
                `;
                pTable.innerHTML += tr;
            });
        }

        // Render Charts (Dark Mode Configured)
        function renderCharts() {
            Chart.defaults.font.family = "'ui-sans-serif', 'system-ui', 'sans-serif'";
            Chart.defaults.color = '#94a3b8'; // Slate 400 for axis text
            Chart.defaults.borderColor = '#334155'; // Slate 700 for grid lines

            const brandColor = '#D07D7D';
            const brandColorAlpha = 'rgba(208, 125, 125, 0.2)';

            // 1. Overview Trend Chart
            new Chart(document.getElementById('overviewChart'), {
                type: 'line',
                data: {
                    labels: trendData.labels,
                    datasets: [
                        {
                            label: 'Clics',
                            data: trendData.clics,
                            borderColor: brandColor,
                            backgroundColor: brandColorAlpha,
                            yAxisID: 'y',
                            tension: 0.3,
                            fill: true,
                            pointBackgroundColor: brandColor,
                            borderWidth: 2
                        },
                        {
                            label: 'Impresiones',
                            data: trendData.impressions,
                            borderColor: '#64748b', // Slate 500
                            borderDash: [5, 5],
                            yAxisID: 'y1',
                            tension: 0.3,
                            pointRadius: 0,
                            borderWidth: 1.5
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: { mode: 'index', intersect: false },
                    plugins: {
                        legend: { labels: { color: '#cbd5e1' } } // Light text legend
                    },
                    scales: {
                        y: { type: 'linear', display: true, position: 'left', title: {display: true, text: 'Clics', color: '#cbd5e1'} },
                        y1: { type: 'linear', display: true, position: 'right', grid: {drawOnChartArea: false}, title: {display: true, text: 'Impresiones', color: '#cbd5e1'} }
                    }
                }
            });

            // 2. Device Split
            new Chart(document.getElementById('deviceChart'), {
                type: 'bar',
                data: {
                    labels: deviceData.labels,
                    datasets: [{
                        label: 'Clics',
                        data: deviceData.data,
                        backgroundColor: [brandColor, '#475569', '#334155'], // Brand, Slate 600, Slate 700
                        borderRadius: 4
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } }
                }
            });

            // 3. Channel Mix
            new Chart(document.getElementById('channelChart'), {
                type: 'doughnut',
                data: {
                    labels: channelData.labels,
                    datasets: [{
                        data: channelData.data,
                        backgroundColor: ['#D07D7D', '#b86b6b', '#a35a5a', '#8f4a4a', '#7a3b3b'], // Monochromatic shades of brand or distinct
                        // Alternative distinct colors for clarity in dark mode:
                        backgroundColor: [brandColor, '#60a5fa', '#a78bfa', '#34d399', '#94a3b8'],
                        borderColor: '#1e293b', // Match card bg for clean spacing
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '60%',
                    plugins: {
                        legend: { position: 'right', labels: { boxWidth: 12, color: '#cbd5e1' } }
                    }
                }
            });

            // 4. Country Chart
            new Chart(document.getElementById('countryChart'), {
                type: 'bar',
                data: {
                    labels: countryData.labels,
                    datasets: [{
                        label: 'Clics',
                        data: countryData.data,
                        backgroundColor: brandColor,
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { beginAtZero: true }
                    },
                    plugins: {
                        legend: { display: false }
                    }
                }
            });
        }

        window.onload = init;

    </script>
</body>
</html>
